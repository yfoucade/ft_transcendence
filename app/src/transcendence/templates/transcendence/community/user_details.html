{% extends "../base.html" %}
{% load i18n %}

{% block content %}
<main id="main-user-details" class="shown">
    <h1 id="user-details-title"><img src="{{ profile.picture.url }}" width="32" height="32"> {{ profile.display_name }}</h1>
    
    {% if not own_page %}
        <form id="follow-form" action="" method="POST" class="inline">
            {% csrf_token %}
            {% if following %}
                <input type="hidden" name="data-action" value="unfollow">
                <button type="submit" class="link-button">
                    Unfollow
                </button>
            {% else %}
                <input type="hidden" name="data-action" value="follow">
                <button type="submit" class="link-button">
                    follow
                </button>
            {% endif %}
        </form>
    {% endif %}

    <h2>Stats</h2>
        {% if nb_wins or nb_losses %}
            Wins: {{ nb_wins }}
            </br>
            Losses: {{ nb_losses }}
        {% else %}
            No Pong game played yet
        {% endif %}
    <h2>Match History</h2>
        {% for game in game_history %}
            <span is_winner="{% if game.winner.profile.display_name == game.user_1.profile.display_name %}true{% else %}false{% endif %}">
                {{ game.user_1.profile.display_name }}
                <img src="{{ game.user_1.profile.picture.url }}">
            </span>
            vs
            <span is_winner="{% if game.winner.profile.display_name == game.user_2.profile.display_name %}true{% else %}false{% endif %}">
                <img src="{{ game.user_2.profile.picture.url }}">
                {{ game.user_2.profile.display_name }}
            </span>
            - 
            <span title="{{ game.start_time }}">
                {{ game.start_time|timesince }}
            </span>
            </br>
        {% endfor %}
</main>
{% endblock content %}
